<nb-card class="medium">
    <nb-card-header>Contact Tracing</nb-card-header>
    <nb-card-body *ngIf="(dataSource$ | async) as contactData">
        <table mat-table [dataSource]="contactData" class="mat-elevation-z8">
            <!-- Contact Column -->
            <ng-container matColumnDef="contact_name">
                <th mat-header-cell *matHeaderCellDef>Contact / Exposed</th>
                <td mat-cell *matCellDef="let contact; let i = index">{{ contact.fname + ' ' + contact.lname }}
                  <a href="#" (click)="showFormB1Window($event, i)">
                    <span class="badge badge-primary">
                      Form B1
                    </span>
                  </a>
                </td>
            </ng-container>

            <!-- Case Column -->
            <ng-container matColumnDef="case">
                <th mat-header-cell *matHeaderCellDef>Case</th>
                <td mat-cell *matCellDef="let contact; let i = index">{{ contact.caseName }}</td>
            </ng-container>

            <!-- Follow-up Personnel Column -->
            <ng-container matColumnDef="followup">
              <th mat-header-cell *matHeaderCellDef>Follow-up Personnel</th>
              <td mat-cell *matCellDef="let contact; let i = index">Logged in contact tracer</td>
            </ng-container>

            <!-- Follow-up 1 to Column -->
            <ng-container matColumnDef="fuDate1">
              <th mat-header-cell *matHeaderCellDef>1<sup>st</sup> Follow-up</th>
              <td mat-cell *matCellDef="let contact; let i = index">
                <span [hidden]="firstFollowupDay">{{ contact.fuDate1 | date:'mediumDate' }}</span>
                <a href="#" [hidden]="!firstFollowupDay" (click)="showFormB2Window($event, i)" disabled>
                  <span class="badge badge-danger">
                    Form B2
                  </span>
                </a>
              </td>
          </ng-container>

          <!-- Follow-up 2 to Column -->
          <ng-container matColumnDef="fuDate2">
            <th mat-header-cell *matHeaderCellDef>2<sup>nd</sup> Follow-up</th>
            <td mat-cell *matCellDef="let contact; let i = index">
              <span [hidden]="secondFollowupDay">{{ contact.fuDate2 | date:'mediumDate' }}</span>
              <a href="#" [hidden]="!secondFollowupDay" (click)="showFormB2Window($event, i)" disabled>
                <span class="badge badge-danger" disabled>
                  Form B2
                </span>
              </a>
            </td>
        </ng-container>

        <!-- Follow-up 3 to Column -->
        <ng-container matColumnDef="fuDate3">
          <th mat-header-cell *matHeaderCellDef>3<sup>rd</sup> Follow-up</th>
          <td mat-cell *matCellDef="let contact; let i = index">
            <span [hidden]="thirdFollowupDay">{{ contact.fuDate3 | date:'mediumDate' }}</span>
            <a href="#" [hidden]="!thirdFollowupDay" (click)="showFormB2Window($event, i)" disabled>
              <span class="badge badge-danger" disabled>
                Form B2
              </span>
            </a>
          </td>
        </ng-container>

        <!-- Follow-up 4 to Column -->
        <ng-container matColumnDef="fuDate4">
          <th mat-header-cell *matHeaderCellDef>4<sup>th</sup> Follow-up</th>
          <td mat-cell *matCellDef="let contact; let i = index">
            <span [hidden]="forthFollowupDay">{{ contact.fuDate4 | date:'mediumDate' }}</span>
            <a href="#" [hidden]="!forthFollowupDay" (click)="showFormB2Window($event, i)" disabled>
              <span class="badge badge-danger" disabled>
                Form B2
              </span>
            </a>
          </td>
        </ng-container>

        <!-- Follow-up 5 to Column -->
        <ng-container matColumnDef="fuDate5">
          <th mat-header-cell *matHeaderCellDef>5<sup>th</sup> Follow-up</th>
          <td mat-cell *matCellDef="let contact; let i = index">
            <span [hidden]="fifthFollowupDay">{{ contact.fuDate5 | date:'mediumDate' }}</span>
            <a href="#" [hidden]="!fifthFollowupDay" (click)="showFormB2Window($event, i)" disabled>
              <span class="badge badge-danger" disabled>
                Form B2
              </span>
            </a>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </nb-card-body>
</nb-card>
